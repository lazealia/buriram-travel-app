<div id="google_container" style="position: fixed; top: -1000px; left: -1000px; z-index: -1; pointer-events: none;">
    <div id="google_translate_element"></div>
</div>

<script type="text/javascript">
    function googleTranslateElementInit() {
        new google.translate.TranslateElement({
            pageLanguage: 'th',
            includedLanguages: 'en,th',
            autoDisplay: false
        }, 'google_translate_element');
    }

    // ฟังก์ชันเปลี่ยนภาษาที่ "ฉลาดขึ้น"
    function changeLanguage(langCode) {
        const select = document.querySelector('.goog-te-combo');
        
        if (langCode === 'th') {
            // ท่าไม้ตายกลับเป็นภาษาไทย: ล้าง Cookie และ Refresh เพื่อความชัวร์ 100%
            document.cookie = "googtrans=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";
            document.cookie = "googtrans=; expires=Thu, 01 Jan 1970 00:00:00 UTC; domain=" + document.domain + "; path=/;";
            location.reload(); 
        } else {
            // เปลี่ยนเป็นภาษาอื่น
            if (select) {
                select.value = langCode;
                select.dispatchEvent(new Event('change'));
            }
        }
    }

    // ฟังก์ชันจัดการ Layout ไม่ให้พังและกดเมนูได้
    function fixLayoutAndPointer() {
        // คืนค่าตำแหน่งหน้าจอที่ Google ชอบดึงขึ้นไป
        if (document.body.style.top !== '0px') {
            document.body.style.top = '0px';
            document.documentElement.style.top = '0px';
        }
        // ลบ Class ที่ทำให้ Layout เพี้ยน
        document.documentElement.classList.remove('translated-ltr', 'translated-rtl');
    }

    setInterval(fixLayoutAndPointer, 500);
</script>

<script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

<style>
    /* ซ่อนแถบ Google ทุกชนิด และทำให้คลิกทะลุได้ */
    .goog-te-banner-frame, 
    .goog-te-banner, 
    .skiptranslate, 
    #goog-gt-tt, 
    .goog-te-balloon-frame,
    iframe.goog-te-menu-frame {
        display: none !important;
        visibility: hidden !important;
        pointer-events: none !important;
    }

    /* ปรับแต่ง Body/HTML ให้ปุ่มกดได้ปกติ */
    html, body {
        top: 0px !important;
        position: static !important; /* ห้ามเป็น relative/fixed ไม่งั้นบังเมนู */
    }

    /* ล้างสีไฮไลท์เวลาแปล */
    .goog-text-highlight {
        background-color: transparent !important;
        box-shadow: none !important;
    }

    /* บังคับให้เมนู Nav ของเราอยู่เหนือแผ่นใสของ Google */
    nav {
        z-index: 9999 !important;
        pointer-events: auto !important;
    }
</style>